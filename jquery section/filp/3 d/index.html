<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <!-- <script src="3d-carousel-gsap/"></script> -->
</head>
<body>
    <div id="contentContainer" class="trans3d">
  <section id="carouselContainer" class="trans3d">
    <figure id="item1" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img1.jpeg" alt=""></div></figure>
    <figure id="item2" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img2.jpeg" alt=""></div></figure>
    <figure id="item3" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img3.jpeg" alt=""></div></figure>
    <figure id="item4" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img4.jpeg" alt=""></div></figure>
    <figure id="item5" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img5.jpeg" alt=""></div></figure>
    <figure id="item6" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img6.jpeg" alt=""></div></figure>
    <figure id="item7" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img1.jpeg" alt=""></div></figure>
    <figure id="item8" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img2.jpeg" alt=""></div></figure>
    <figure id="item9" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img3.jpeg" alt=""></div></figure>
    <figure id="item10" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img4.jpeg" alt=""></div></figure>
    <figure id="item11" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img5.jpeg" alt=""></div></figure>
    <figure id="item12" class="carouselItem trans3d"><div class="carouselItemInner trans3d"><img src="img6.jpeg" alt=""></div></figure>
  </section>
</div>
    <script>
        // set and cache variables
var w, container, carousel, item, radius, itemLength, rY, ticker;
var mouseX = 0;
var mouseY = 0;
var mouseZ = 0;
var addX = 0;

$(document).ready( init )

function init() {
  w = $(window);
  container = $( '#contentContainer' );
  carousel = $( '#carouselContainer' );
  item = $( '.carouselItem' );
  itemLength = $( '.carouselItem' ).length;
  rY = 360 / itemLength;
  radius = Math.round( (250) / Math.tan( Math.PI / itemLength ) );

  // set container 3d props
  TweenMax.set(container, {perspective:600})
  TweenMax.set(carousel, {z:-(radius)})

  // create carousel item props
  for ( var i = 0; i < itemLength; i++ ) {
    var $item = item.eq(i);
    var $block = $item.find('.carouselItemInner');

    //thanks @chrisgannon!
    TweenMax.set($item, {rotationY:rY * i, z:radius, transformOrigin:"50% 50% " + -radius + "px"});

    animateIn( $item, $block )
  }

  // set mouse x and y props and looper ticker
  window.addEventListener( "mousemove", onMouseMove, false );
  ticker = setInterval( looper, 1000/60 );
}

function animateIn( $item, $block ) {
  var $nrX = 360 * getRandomInt(2);
  var $nrY = 360 * getRandomInt(2);

  var $nx = -(2000) + getRandomInt( 4000 )
  var $ny = -(2000) + getRandomInt( 4000 )
  var $nz = -4000 +  getRandomInt( 4000 )

  var $s = 1.5 + (getRandomInt( 10 ) * .1)
  var $d = 1 - (getRandomInt( 8 ) * .1)

  TweenMax.set( $item, { autoAlpha:1, delay:$d } )
  TweenMax.set( $block, { z:$nz, rotationY:$nrY, rotationX:$nrX, x:$nx, y:$ny, autoAlpha:0} )
  TweenMax.to( $block, $s, { delay:$d, rotationY:0, rotationX:0, z:0,  ease:Expo.easeInOut} )
  TweenMax.to( $block, $s-.5, { delay:$d, x:0, y:0, autoAlpha:1, ease:Expo.easeInOut} )
}

function onMouseMove(event) {
  mouseX = -(-(window.innerWidth * .5) + event.pageX) * .0025;
  mouseY = -(-(window.innerHeight * .5) + event.pageY ) * .01;
  mouseZ = -(radius) - (Math.abs(-(window.innerHeight * .5) + event.pageY ) - 200);
}

// loops and sets the carousel 3d properties
function looper() {
  addX += mouseX
  TweenMax.to( carousel, 1, { rotationY:addX, rotationX:mouseY, ease:Quint.easeOut } )
  TweenMax.set( carousel, {z:mouseZ } )
  fps.text( 'Framerate: ' + counter.tick() + '/60 FPS' )
}

function getRandomInt( $n ) {
  return Math.floor((Math.random()*$n)+1);
}
    </script>
</body>
</html>